# Implementation Plan - Hindu Panchanga v3.2

## 1. Branching & Setup
- [ ] Create branch `feature/v3.2-upgrade` from `main`.
- [ ] Ensure local environment is up to date.

## 2. Rashi & Lagna Implementation (Backend)
- [ ] **Data Structures**:
    - [ ] Create `utils/zodiac.py` (or update `astronomy.py`) with Rashi/Lagna dictionaries (EN, KN, SA).
- [ ] **Calculation Logic** (`utils/astronomy.py`):
    - [ ] Implement `calculate_rashi(moon_lon)`.
    - [ ] Implement `calculate_lagna(date, time, lat, lon)` using `skyfield` or standard vector approach.
- [ ] **API Update** (`app.py`):
    - [ ] Update `/api/panchanga` to call new functions.
    - [ ] Include `rashi` and `lagna` objects in JSON response.

## 3. Frontend Updates
- [ ] **Privacy Note**:
    - [ ] Update `templates/index.html` to add the privacy footer.
- [ ] **Rashi/Lagna Display**:
    - [ ] Update `static/js/script.js` (or HTML template) to parse and display the new fields in the results table.

## 4. Operational Upgrades (Deployment)
- [ ] **HTTPS Configuration**:
    - [ ] Update `panchanga.nginx.template` to listen on 443 and add SSL directives.
    - [ ] Update `deploy.sh` to:
        - [ ] Generate self-signed certificates (`openssl`) in `/etc/ssl/private`.
        - [ ] Open firewall port 443 (SELinux/FirewallD).
- [ ] **Log Rotation**:
    - [ ] Create `panchanga.logrotate` file.
    - [ ] Update `deploy.sh` to copy this to `/etc/logrotate.d/`.

## 5. Verification & Testing
- [ ] **Local Testing**: Verify Rashi/Lagna values against reference.
- [ ] **Cloud Testing (Dry Run)**: Verify `deploy.sh` changes (locally check syntax/logic).

## 6. Merge & Release
- [ ] Merge `feature/v3.2-upgrade` to `main`.
- [ ] Tag release `v3.2`.
